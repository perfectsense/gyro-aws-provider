gyro::container-config apache-global
    name: "apache-global"
    image: "xyz"
    @extends-container: $(container-defaults "git@github.com:perfectsense/gyro-container-plugin.git" "/examples/apache.yml")
    file-backend: "local"
    file-backend-path: "testHash"
end

gyro::container-config apache-production
    name: "apache-production"
    memory: "0.2"
    data: {
      function: site,
      max_http_header_size: 16384,
      rsyslog_enabled: false,
      apache: {
        timeout: 310,
        keepalive: 'On',
        keepaliverequests: 100,
        ext_status: true,
        keepalivetimeout: 305,
        user: www-data,
        group: www-data
      }
    }
    @extends-container: [$(gyro::container-config apache-global)]
    file-backend: "local"
    file-backend-path: "testHash"
end

gyro::container-config apache-frontend
    name: "apache-layer"
    memory: "0.6"
    data: {
       function: site,
       max_http_header_size: 22222,
       rsyslog_enabled: true
    }
    file-backend: "local"
    file-backend-path: "testHash"
    @extends-container: [$(gyro::container-config apache-production)]
end
